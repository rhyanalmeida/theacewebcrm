# üöÄ Render Deployment Commands

## Build & Start Commands for Each Service

### 1Ô∏è‚É£ Backend API (ace-crm-backend)
- **Build Command**: `npm install && npm run build`
- **Start Command**: `npm start`
- **Root Directory**: `.` (root of repo)
- **Port**: 5000 (set in env vars)

### 2Ô∏è‚É£ Frontend Dashboard (ace-crm-frontend)
- **Build Command**: `npm install && npm run build`
- **Start Command**: `npm start`
- **Root Directory**: `frontend`
- **Port**: Auto-assigned by Render

### 3Ô∏è‚É£ Client Portal (ace-crm-portal)
- **Build Command**: `npm install && npm run build`
- **Start Command**: `npm start`
- **Root Directory**: `client-portal`
- **Port**: Auto-assigned by Render

## üìù If Setting Up Manually in Render Dashboard

### For Backend Service:
1. **Service Name**: ace-crm-backend
2. **Root Directory**: Leave empty or `.`
3. **Build Command**: `npm install && npm run build`
4. **Start Command**: `npm start`
5. **Environment**: Node
6. **Plan**: Starter ($7/month) or Free

### For Frontend Service:
1. **Service Name**: ace-crm-frontend
2. **Root Directory**: `frontend`
3. **Build Command**: `npm install && npm run build`
4. **Start Command**: `npm start`
5. **Environment**: Node
6. **Plan**: Starter ($7/month) or Free

### For Client Portal Service:
1. **Service Name**: ace-crm-portal
2. **Root Directory**: `client-portal`
3. **Build Command**: `npm install && npm run build`
4. **Start Command**: `npm start`
5. **Environment**: Node
6. **Plan**: Starter ($7/month) or Free

## üîë Environment Variables to Add in Render

### Backend Service Needs:
```
NODE_ENV=production
PORT=5000
STRIPE_SECRET_KEY=[Your Stripe Secret Key from Dashboard]
SUPABASE_URL=https://hxcrjwrinexiyeyyyhfa.supabase.co
SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imh4Y3Jqd3JpbmV4aXlleXl5aGZhIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTQ1MDcyMTQsImV4cCI6MjA3MDA4MzIxNH0.UgHQzFICQqj5AAJty3PXqsEqL9s2NPRXyxIss1515M4
SUPABASE_SERVICE_KEY=(Get from Supabase Dashboard ‚Üí Settings ‚Üí API ‚Üí service_role key)
JWT_SECRET=(Auto-generated by Render)
JWT_REFRESH_SECRET=(Auto-generated by Render)
SESSION_SECRET=(Auto-generated by Render)
CORS_ORIGIN=https://ace-crm-frontend.onrender.com,https://ace-crm-portal.onrender.com
```

### Frontend Service Needs:
```
NODE_ENV=production
NEXT_PUBLIC_API_URL=https://ace-crm-backend.onrender.com/api
NEXT_PUBLIC_APP_URL=https://ace-crm-frontend.onrender.com
NEXT_PUBLIC_SUPABASE_URL=https://hxcrjwrinexiyeyyyhfa.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imh4Y3Jqd3JpbmV4aXlleXl5aGZhIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTQ1MDcyMTQsImV4cCI6MjA3MDA4MzIxNH0.UgHQzFICQqj5AAJty3PXqsEqL9s2NPRXyxIss1515M4
NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY=(Get from Stripe Dashboard)
```

### Client Portal Service Needs:
```
NODE_ENV=production
NEXT_PUBLIC_API_URL=https://ace-crm-backend.onrender.com/api
NEXT_PUBLIC_APP_URL=https://ace-crm-portal.onrender.com
NEXT_PUBLIC_SUPABASE_URL=https://hxcrjwrinexiyeyyyhfa.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imh4Y3Jqd3JpbmV4aXlleXl5aGZhIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTQ1MDcyMTQsImV4cCI6MjA3MDA4MzIxNH0.UgHQzFICQqj5AAJty3PXqsEqL9s2NPRXyxIss1515M4
NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY=(Get from Stripe Dashboard)
```

## üéØ Quick Answer:

**Start Command for all services**: `npm start`

This works because:
- Backend: `npm start` ‚Üí runs `node dist/server.js`
- Frontend: `npm start` ‚Üí runs `next start -p $PORT`
- Portal: `npm start` ‚Üí runs `next start -p $PORT`

The `$PORT` variable is automatically provided by Render.

## üìä Deployment Order:

1. Deploy Backend first (other services depend on it)
2. Deploy Frontend and Portal after Backend is live
3. Update webhook URLs in Stripe after deployment

## ‚úÖ Using Blueprint (Easiest):

If you use the Blueprint (render.yaml), all these commands are already configured. Just:
1. Connect GitHub repo
2. Add the environment variables
3. Click Deploy

The render.yaml file has everything pre-configured!